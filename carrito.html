<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>PINK KEY ‚Äî PRODUCTO</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

  <!-- Bootstrap CSS (CDN para utilidades responsive) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    :root{
      --pink:#ff6fa7;
      --pink-dark:#e24f8f;
      --muted:#f9f9fb;
      --text:#2a2a2a;
    }
    *{box-sizing:border-box;font-family:'Poppins',sans-serif;}
    body{margin:0;background:#fff;color:var(--text);}

    /* ---------------- NAVBAR (unificado) ---------------- */
    .site-navbar {
      position:sticky; top:0; z-index:2000;
      background:#fff; box-shadow:0 2px 6px rgba(0,0,0,0.06);
    }
    .navbar-brand img{height:80px; display:block;}
    .nav-item.nav-link { font-weight:600; color:var(--text); }
    .nav-item.nav-link.active { color:var(--pink-dark); font-weight:700; }
    .btn-contact { padding:8px 12px;border-radius:8px;background:var(--pink);color:#fff;text-decoration:none;font-weight:700; border:none; }

    .custom-toggler-icon {
      display:inline-block;width:24px;height:2px;background:#e91e63;position:relative;
    }
    .custom-toggler-icon::before,
    .custom-toggler-icon::after {
      content:'';position:absolute;width:24px;height:2px;background:#e91e63;left:0;
    }
    .custom-toggler-icon::before{ top:-7px; }
    .custom-toggler-icon::after{ top:7px; }

    /* ICONOS */
    .icono-nav { color: #e91e63; text-decoration:none; transition:0.3s; }
    .icono-nav:hover { color:#ff4081; }

    /* Mobile slide menu (id√©ntico a index) */
    .mobile-menu {
       position: fixed; top: 0; right: -260px; width: 260px; height: 100vh;
       background: #fff; box-shadow: -2px 0 10px rgba(0,0,0,0.15);
       transition: right 0.3s ease-in-out; z-index: 9999; padding: 20px;
    }
    .mobile-menu.open { right: 0; }
    .mobile-menu-content .nav-link { display:block; font-weight:600; margin:12px 0; text-transform:uppercase; color:#000; }
    .close-btn { background:none; border:none; font-size:32px; position:absolute; top:10px; right:15px; cursor:pointer; }
    @media(min-width: 992px){ .mobile-menu { display:none; } }

    /* Rest of your custom styles (kept from original) */
    .container{max-width:1200px;margin:30px auto;padding:0 16px;}
    .grid{display:grid;grid-template-columns:260px 1fr;gap:30px;align-items:start;}
    @media(max-width:900px){.grid{grid-template-columns:1fr;}}
    .categories h2{margin:0 0 12px;font-size:20px;}
    .cat-list{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:10px;}
    .cat-btn{display:block;padding:10px 12px;border-radius:10px;text-decoration:none;background:#fff;color:var(--text);border:1px solid rgba(0,0,0,0.05);font-weight:600;transition:all .15s;}
    .cat-btn:hover{color:var(--pink);transform:translateX(4px);}
    .cat-btn.active{border-color:var(--pink);background:#fff0f6;color:var(--pink-dark);}

    .products-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:20px;}
    .product-card{border:1px solid rgba(0,0,0,0.05);border-radius:14px;background:#fff;overflow:hidden;transition:all .2s;display:flex;flex-direction:column;}
    .product-card:hover{box-shadow:0 8px 20px rgba(255,111,167,0.15);transform:translateY(-4px);}
    .product-img{height:210px;object-fit:cover;width:100%;}
    .product-body{padding:14px;display:flex;flex-direction:column;gap:8px;}
    .product-title{font-weight:700;font-size:16px;cursor:pointer;text-decoration:none;color:var(--text);}
    .product-desc{font-size:13px;color:#666;margin:0;}
    .product-row{display:flex;justify-content:space-between;align-items:center;}
    .stars{color:#f5b301;font-size:14px;}
    .price{font-weight:700;}
    .product-actions{display:flex;gap:10px;margin-top:6px;}
    .btn-sm{border:none;padding:8px 10px;border-radius:10px;cursor:pointer;font-weight:600;}
    .btn-add{background:var(--pink);color:#fff;}
    .btn-add:hover{background:var(--pink-dark);}
    .btn-like{background:#fff;border:1px solid rgba(0,0,0,0.05);color:var(--pink);}
    .btn-like:hover{background:#fff0f6;}

    .side-panel{position:fixed;top:0;right:-420px;width:380px;height:100vh;background:#fff;box-shadow:-10px 0 30px rgba(0,0,0,0.12);transition:right .3s ease;z-index:2000;padding:22px;overflow:auto;border-left:4px solid rgba(255,111,167,0.08);}
    .side-panel.open{right:0;}
    .side-close{position:absolute;top:16px;right:16px;background:var(--pink);border:none;color:#fff;width:34px;height:34px;border-radius:50%;cursor:pointer;font-size:18px;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 10px rgba(255,111,167,0.25);transition:all .2s;}
    .side-close:hover{background:var(--pink-dark);transform:scale(1.05);}

    .icon-btn{width:44px;height:44px;border-radius:12px;background:#fff;border:1px solid rgba(0,0,0,0.05);display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;position:relative;}
    .icon-badge{position:absolute;top:-5px;right:-2px;background:var(--pink);color:#fff;font-size:12px;padding:2px 6px;border-radius:50%;border:2px solid #fff;min-width:20px;text-align:center;font-weight:600;}

    /* whatsapp float */
    .whatsapp-float {position: fixed; bottom: 90px; right: 20px; background-color: #25D366; color: white; font-size:30px; line-height:60px; text-align:center; width:60px; height:60px; border-radius:50%; box-shadow:0 4px 10px rgba(0,0,0,0.3); z-index: 999; transition: all .3s ease;}
    .whatsapp-float:hover { transform: scale(1.1); }
  </style>
</head>
<body>

  <!-- NAVBAR (UN SOLO BLOQUE) -->
  <header class="site-navbar">
    <div class="container" style="max-width:1200px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;padding:8px 16px;">
      <a href="index.html" class="navbar-brand"><img src="img/pink_key-removebg-preview.png" alt="Pink Key"></a>

      <!-- bot√≥n hamburguesa (solo visible en m√≥vil) -->
      <button id="burgerBtn" class="d-lg-none" aria-label="Abrir men√∫" style="background:none;border:0;display:inline-flex;align-items:center;gap:6px;cursor:pointer;">
        <span class="custom-toggler-icon"></span>
      </button>

      <!-- men√∫ escritorio -->
      <div id="desktopMenu" class="d-none d-lg-flex" style="align-items:center;gap:28px;">
        <nav class="nav-links" style="display:flex;gap:28px;align-items:center;">
          <a href="index.html" class="nav-item nav-link">INICIO</a>
          <a href="about.html" class="nav-item nav-link">NOSOTROS</a>
          <a href="carrito.html" class="nav-item nav-link active">PRODUCTOS</a>
          <a href="contact.html" class="btn-contact">CONTACTO</a>
        </nav>

        <div class="d-flex align-items-center gap-3">
          <a href="mailto:talleresreymotors@gmail.com" class="icon-btn" title="Contacto"><i class="fa-solid fa-envelope" style="color:var(--pink-dark)"></i></a>
          <button id="favToggleDesk" class="icon-btn"><i class="fa-regular fa-heart" style="color:var(--pink-dark)"></i><span id="favCountDesk" class="icon-badge" style="display:none"></span></button>
          <button id="cartToggleDesk" class="icon-btn"><i class="fa-solid fa-cart-shopping" style="color:var(--pink-dark)"></i><span id="cartCountDesk" class="icon-badge" style="display:none"></span></button>
          <button id="userToggleDesk" class="icon-btn"><i class="fa-regular fa-user" style="color:var(--pink-dark)"></i></button>
        </div>
      </div>
    </div>
  </header>

  <!-- MEN√ö M√ìVIL (DESLIZANTE) -->
<div id="mobileMenu" class="mobile-menu">
  <div class="mobile-menu-content">
    <button class="close-btn" id="mobileClose">&times;</button>
    <a href="index.html" class="nav-link">INICIO</a>
    <a href="about.html" class="nav-link">NOSOTROS</a>
    <a href="carrito.html" class="nav-link active">PRODUCTOS</a>
    <a href="contact.html" class="btn btn-primary mt-3" style="display:inline-block;margin-top:18px;padding:10px 22px;background:var(--pink);color:#fff;border-radius:10px;text-decoration:none;">CONTACTO</a>

    <div style="display:flex;justify-content:center;gap:24px;margin-top:30px;">
      <button id="userToggleMob" class="fs-4 icono-nav" style="background:none;border:none;"><i class="fa-regular fa-user"></i></button>
      <button id="favToggleMob" class="fs-4 icono-nav" style="background:none;border:none;position:relative;">
        <i class="fa-regular fa-heart"></i>
        <span id="favCountMob" class="icon-badge" style="display:none;position:absolute;top:-10px;right:-10px;background:var(--pink);color:#fff;font-size:10px;padding:2px 5px;border-radius:50%;"></span>
      </button>
      <button id="cartToggleMob" class="fs-4 icono-nav" style="background:none;border:none;position:relative;">
        <i class="fa-solid fa-cart-shopping"></i>
        <span id="cartCountMob" class="icon-badge" style="display:none;position:absolute;top:-10px;right:-10px;background:var(--pink);color:#fff;font-size:10px;padding:2px 5px;border-radius:50%;"></span>
      </button>
    </div>
  </div> <!-- üîπ cierre de .mobile-menu-content -->
</div> <!-- üîπ cierre de #mobileMenu -->

<!-- üå∏ PROMOCIONES DESTACADAS - Pink Key -->
<section class="promoBannerPK">
  <div class="promoContainerPK">

    <!-- üíã Promoci√≥n del Mes -->
    <div class="promoSlidePK" style="background-image: url('img/paletas22.jpg'); display:block;">
      <div class="promoContentPK">
        <h2 style="color: #fff;">Promoci√≥n del Mes</h2>
        <p>30% de descuento en labiales Pink Kiss  ‚Äî ¬°Solo por tiempo limitado!</p>
        <a href="https://wa.me/573105519202?text=¬°Hola!%20Vi%20la%20%F0%9F%92%8B%20Promoci%C3%B3n%20del%20Mes%20de%20Pink%20Key%20y%20quiero%20m%C3%A1s%20informaci%C3%B3n%20sobre%20los%20labiales%20Pink%20Kiss%20%F0%9F%92%84" target="_blank">Ver Promoci√≥n</a>
      </div>
    </div>

    <!-- üå∏ Combo Belleza Total -->
    <div class="promoSlidePK" style="background-image: url('img/paletas33.jpg');">
      <div class="promoContentPK">
        <h2 style="color: #fff;"> Combo Belleza Total</h2>
        <p>Base + Labial + Brocha a solo <b>$29.900</b> ‚Äî ¬°Luce incre√≠ble cada d√≠a!</p>
        <a href="https://wa.me/573105519202?text=¬°Hola!%20Me%20interesa%20el%20%F0%9F%8C%B8%20Combo%20Belleza%20Total%20de%20Pink%20Key%20%2C%20quiero%20comprarlo%20por%20$29.900%20%F0%9F%92%95" target="_blank">Ver Combo</a>
      </div>
    </div>

    <!-- üéÅ Regalo Sorpresa -->
    <div class="promoSlidePK" style="background-image: url('img/producto11.jpg');">
      <div class="promoContentPK">
        <h2 style="color: #fff;"> Regalo Sorpresa</h2>
        <p>Por compras mayores a <b>$40.000</b>, recibe un obsequio especial </p>
        <a href="https://wa.me/573105519202?text=¬°Hola!%20Vi%20el%20%F0%9F%8E%81%20Regalo%20Sorpresa%20de%20Pink%20Key%20y%20quiero%20saber%20c%C3%B3mo%20obtenerlo%20con%20mi%20compra%20%F0%9F%92%9C" target="_blank">Ver Regalo</a>
      </div>
    </div>

    <!-- Indicadores -->
    <div class="promoDotsPK">
      <span class="promoDotPK activePK" onclick="currentSlidePK(1)"></span>
      <span class="promoDotPK" onclick="currentSlidePK(2)"></span>
      <span class="promoDotPK" onclick="currentSlidePK(3)"></span>
    </div>
  </div>
</section>

<!-- üíï ESTILOS AISLADOS DEL BANNER -->
<style>
  .promoBannerPK {
    width: 90%;
    margin: 60px auto;
    border-radius: 25px;
    overflow: hidden;
    box-shadow: 0 10px 25px rgba(0,0,0,0.15);
    position: relative;
  }
  .promoContainerPK {
    position: relative;
  }
  .promoSlidePK {
    display: none;
    height: 65vh;
    background-size: cover;
    background-position: center;
    border-radius: 25px;
    position: relative;
  }
  .promoContentPK {
    position: absolute;
    bottom: 20%;
    left: 50%;
    transform: translateX(-50%);
    text-align: center;
    color: #fff;
    background: rgba(0, 0, 0, 0.45);
    padding: 30px;
    border-radius: 20px;
    width: 80%;
    max-width: 700px;
    backdrop-filter: blur(2px);
  }
  .promoContentPK h2 {
    font-size: 2rem;
    margin-bottom: 10px;
  }
  .promoContentPK p {
    font-size: 1rem;
    margin-bottom: 20px;
  }
  .promoContentPK a {
    display: inline-block;
    padding: 10px 25px;
    background: #e91e63;
    color: #fff;
    border-radius: 30px;
    text-decoration: none;
    font-weight: 600;
    transition: 0.3s;
  }
  .promoContentPK a:hover {
    background: #ff4081;
    transform: scale(1.05);
  }

  /* Indicadores */
  .promoDotsPK {
    text-align: center;
    position: absolute;
    bottom: 15px;
    width: 100%;
  }
  .promoDotPK {
    height: 12px;
    width: 12px;
    margin: 0 5px;
    background-color: rgba(255,255,255,0.7);
    border-radius: 50%;
    display: inline-block;
    cursor: pointer;
    transition: 0.3s;
  }
  .activePK, .promoDotPK:hover {
    background-color: #e91e63;
  }
  .fadePK {
    animation: fadeEffectPK 1s;
  }
  @keyframes fadeEffectPK {
    from {opacity: 0.4;}
    to {opacity: 1;}
  }
</style>

<!-- üí´ SCRIPT AISLADO DEL BANNER -->
<script>
  let slideIndexPK = 0;
  showSlidesPK();

  function showSlidesPK() {
    const slides = document.getElementsByClassName("promoSlidePK");
    const dots = document.getElementsByClassName("promoDotPK");

    for (let i = 0; i < slides.length; i++) {
      slides[i].style.display = "none";
    }
    slideIndexPK++;
    if (slideIndexPK > slides.length) { slideIndexPK = 1; }

    for (let i = 0; i < dots.length; i++) {
      dots[i].classList.remove("activePK");
    }

    slides[slideIndexPK - 1].style.display = "block";
    dots[slideIndexPK - 1].classList.add("activePK");

    setTimeout(showSlidesPK, 5000); // cambia cada 5 segundos
  }

  function currentSlidePK(n) {
    slideIndexPK = n - 1;
    showSlidesPK();
  }
</script>

  <!-- MAIN -->
  <main class="container">
    <div class="grid">
      <aside class="categories">
        <h2>Categor√≠as</h2>
        <ul class="cat-list">
          <li><a class="cat-btn active" data-cat="all">Todo</a></li>
          <li><a class="cat-btn" data-cat="rostro">Rostro</a></li>
          <li><a class="cat-btn" data-cat="ojos">Ojos</a></li>
          <li><a class="cat-btn" data-cat="labios">Labios</a></li>
          <li><a class="cat-btn" data-cat="herramientas">Herramientas</a></li>
        </ul>
      </aside>

      <section>
        <h1>Productos destacados</h1>
        <div class="products-grid" id="productsGrid"></div>
      </section>
    </div>
  </main>

  <!-- Panels (cart / fav / user) - copiados tal cual -->
  <aside id="cartPanel" class="side-panel">
    <button class="side-close" data-close="cartPanel"><i class="fa-solid fa-xmark"></i></button>
    <h3>Carrito</h3>
    <div id="cartList"></div>
    <div class="total-row"><span>Total:</span> <span id="cartTotal">$0</span></div>
    <button class="btn-buy" id="buyBtn">Comprar por WhatsApp</button>
  </aside>

  <aside id="favPanel" class="side-panel">
    <button class="side-close" data-close="favPanel"><i class="fa-solid fa-xmark"></i></button>
    <h3>Favoritos</h3>
    <div id="favList"></div>
  </aside>

  <aside id="userPanel" class="side-panel">
    <button class="side-close" data-close="userPanel"><i class="fa-solid fa-xmark"></i></button>
    <h3 style="text-align:center;color:var(--pink-dark);font-weight:700;">Bienvenida a Pink Key </h3>
    <p style="text-align:center;color:#555;font-size:14px;margin-bottom:20px;">Inicia sesi√≥n o crea tu cuenta para disfrutar de nuestros productos.</p>
    <!-- formulario simplificado -->
    <form class="user-form" style="display:flex;flex-direction:column;gap:14px;">
      <div style="position:relative;">
        <i class="fa-solid fa-user" style="position:absolute;left:12px;top:50%;transform:translateY(-50%);color:var(--pink);"></i>
        <input type="text" placeholder="Nombre completo" required style="width:100%;padding:10px 10px 10px 38px;border:1px solid #ddd;border-radius:10px;font-size:14px;">
      </div>
      <div style="position:relative;">
        <i class="fa-solid fa-envelope" style="position:absolute;left:12px;top:50%;transform:translateY(-50%);color:var(--pink);"></i>
        <input type="email" placeholder="Correo electr√≥nico" required style="width:100%;padding:10px 10px 10px 38px;border:1px solid #ddd;border-radius:10px;font-size:14px;">
      </div>
      <div style="position:relative;">
        <i class="fa-solid fa-lock" style="position:absolute;left:12px;top:50%;transform:translateY(-50%);color:var(--pink);"></i>
        <input type="password" placeholder="Contrase√±a" required style="width:100%;padding:10px 10px 10px 38px;border:1px solid #ddd;border-radius:10px;font-size:14px;">
      </div>
      <button type="submit" style="background:var(--pink);border:none;color:#fff;padding:10px;border-radius:10px;font-weight:700;cursor:pointer;transition:.3s;">Iniciar sesi√≥n</button>
      <button type="button" style="background:#fff;border:2px solid var(--pink);color:var(--pink-dark);padding:10px;border-radius:10px;font-weight:700;cursor:pointer;transition:.3s;">Registrarse</button>
    </form>
  </aside>

  <!-- PRODUCT DATA y SCRIPTS -->
  <script>
    const PRODUCTS = [
      {id:'p1',title:'Paleta de Colores',price:25000,img:'img/Artpaleta2.jpeg',cat:'rostro',desc:'Paleta con tonos b√°sicos.',rating:5},
      {id:'p2',title:'Paleta Rojos',price:20000,img:'img/Artpaleta3.jpeg',cat:'rostro',desc:'Tonos c√°lidos vibrantes.',rating:4},
      {id:'p3',title:'Hidra Labios',price:10000,img:'img/Artlabial1.jpeg',cat:'labios',desc:'B√°lsamo con color natural.',rating:5},
      {id:'p4',title:'Delineador',price:15000,img:'img/Artdelinead1.jpeg',cat:'ojos',desc:'Trazos duraderos.',rating:4},
      {id:'p5',title:'M√°scara de Pesta√±as',price:15000,img:'img/Artmascara1.jpeg',cat:'ojos',desc:'Volumen instant√°neo.',rating:5},
      {id:'p6',title:'Esponja de maquillaje',price:8000,img:'img/Herramienta8.jpg',cat:'herramientas',desc:'Beauty Blender.',rating:4},
      {id:'p7',title:'M√°scara de Pesta√±as',price:10000,img:'img/Ojos1.jpg',cat:'ojos',desc:'Rimel con duraci√≥n.',rating:5},
      {id:'p8',title:'Rosy Tint Gloss',price:10000,img:'img/Labios6.jpg',cat:'labios',desc:'Labios hidratados.',rating:4},
      {id:'p9',title:'Polvos de brillo',price:25000,img:'img/cara1.jpg',cat:'rostro',desc:'Paleta con tonos b√°sicos.',rating:5},
      {id:'p10',title:'Lips rosados',price:7000,img:'img/Labios1.jpg',cat:'labios',desc:'Lips con un color llamativo rosado.',rating:4},
      {id:'p11',title:'Hidra Labios',price:10000,img:'img/Labios2.jpg',cat:'labios',desc:'Hidrata tus labios con lo mejor.',rating:5},
      {id:'p12',title:'Sombra de ojos',price:15000,img:'img/Ojos2.jpg',cat:'ojos',desc:'looks elegantes con muchos colores',rating:4},
      {id:'p13',title:'Paleta de ojos',price:15000,img:'img/Ojos3.jpg',cat:'ojos',desc:'Los mejores colores para tus ojos.',rating:5},
      {id:'p14',title:'Pesta√±as Postizas',price:20000,img:'img/Herramienta7.jpg',cat:'herramientas',desc:'Para resaltar tu mirada.',rating:4},
      {id:'p15',title:'Base de brillo',price:10000,img:'img/cara2.jpg',cat:'rostro',desc:'looks elegantes en tonos c√°lidos.',rating:5},
      {id:'p16',title:'Iluminador',price:10000,img:'img/cara3.jpg',cat:'rostro',desc:'Iluminador de diferentes colores.',rating:4},
      {id:'p17',title:'Labios divertidos',price:15000,img:'img/Labios3.jpg',cat:'labios',desc:'Hidratante con figuras de gato.',rating:5},
      {id:'p18',title:'Labiales',price:8000,img:'img/Labios4.jpg',cat:'labios',desc:'Lo mejor en labiales con un tono rojo brillante.',rating:4},
      {id:'p19',title:'polvos de compacto',price:10000,img:'img/cara4.jpg',cat:'rostro',desc:'Un maquillaje perfecto.',rating:5},
      {id:'p20',title:'Polvos translucidos',price:15000,img:'img/cara5.jpg',cat:'rostro',desc:'Aporta un color brillante y lindo.',rating:4},
      {id:'p21',title:'M√°scara de Pesta√±as',price:15000,img:'img/Ojos1.jpg',cat:'ojos',desc:'Volumen instant√°neo.',rating:5},
      {id:'p22',title:'Sombras ',price:20000,img:'img/sombrra.jpg',cat:'herramientas',desc:'Sombras de colores calidos.',rating:4},
      {id:'p23',title:'Paleta de sombras',price:10000,img:'img/sombra2.jpg',cat:'herramientas',desc:'Paleta de sombras con colores llamativos.',rating:5},
      {id:'p24',title:'Big Paletas',price:15000,img:'img/sombra3.jpg',cat:'herramientas',desc:'Grandes paletas de sombras con colres tierra.',rating:4},
      {id:'p25',title:'Paleta rosada',price:25000,img:'img/sombra4.jpg',cat:'herramientas',desc:'Paleta de sombras con colores rosados.',rating:5},
      {id:'p26',title:'Lips rosados',price:9000,img:'img/Labios1.jpg',cat:'labios',desc:'Lips con un color llamativo rosado.',rating:4},
      {id:'p27',title:'Hidra Labios',price:10000,img:'img/Labios2.jpg',cat:'labios',desc:'>Hidrata tus labios con lo mejor.',rating:5},
      {id:'p28',title:'Sombra de ojos',price:15000,img:'img/Ojos2.jpg',cat:'ojos',desc:'looks elegantes con muchos colores',rating:4},
      {id:'p29',title:'Paleta de ojos',price:15000,img:'img/Ojos3.jpg',cat:'ojos',desc:'Los mejores colores para tus ojos.',rating:5},
      {id:'p30',title:'Pesta√±as Postizas',price:20000,img:'img/Herramienta7.jpg',cat:'herramientas',desc:'Para resaltar tu mirada.',rating:4},
      
    ];
    let CART={}, FAV={};
    const grid=document.getElementById('productsGrid');

    function renderProducts(cat='all'){
      grid.innerHTML='';
      PRODUCTS.filter(p=>cat==='all'||p.cat===cat).forEach(p=>{
        grid.innerHTML+=`
          <div class="product-card">
            <img src="${p.img}" class="product-img" alt="${p.title}">
            <div class="product-body">
              <a class="product-title" onclick="openDetail('${p.id}')">${p.title}</a>
              <p class="product-desc">${p.desc}</p>
              <div class="product-row"><div class="stars">${'‚òÖ'.repeat(p.rating)}${'‚òÜ'.repeat(5-p.rating)}</div><div class="price">$${p.price.toLocaleString()}</div></div>
              <div class="product-actions">
                <button class="btn-sm btn-add" onclick="addToCart('${p.id}')">Agregar</button>
                <button class="btn-sm btn-like" onclick="toggleFav('${p.id}')"><i class="${FAV[p.id]?'fa-solid':'fa-regular'} fa-heart"></i></button>
              </div>
            </div>
          </div>`;
      });
    }

    function togglePanel(id){
      document.querySelectorAll('.side-panel').forEach(p=>p.classList.remove('open'));
      document.getElementById(id).classList.add('open');
    }
    // Conectar los botones del men√∫ m√≥vil con los mismos paneles
document.getElementById('cartToggleMob').onclick = () => { togglePanel('cartPanel'); renderCart(); closeMobileMenu(); };
document.getElementById('favToggleMob').onclick = () => { togglePanel('favPanel'); renderFav(); closeMobileMenu(); };
document.getElementById('userToggleMob').onclick = () => { togglePanel('userPanel'); closeMobileMenu(); };


    document.querySelectorAll('.side-close').forEach(btn=>{
      btn.addEventListener('click',()=>{
        const id=btn.getAttribute('data-close');
        document.getElementById(id).classList.remove('open');
      });
    });

    function addToCart(id){ CART[id]=(CART[id]||0)+1; renderCart(); togglePanel('cartPanel'); }
    function renderCart(){
      let html='', total=0, count=0;
      for(let k in CART){
        const p=PRODUCTS.find(x=>x.id===k); const q=CART[k]; count+=q; total+=p.price*q;
        html+=`<div class="panel-item"><img src="${p.img}" style="width:64px;height:64px;object-fit:cover;border-radius:8px;"><div style="flex:1"><strong>${p.title}</strong><br>$${p.price.toLocaleString()} x ${q}</div></div>`;
      }
      document.getElementById('cartList').innerHTML=html||'<p>Tu carrito est√° vac√≠o.</p>';
      document.getElementById('cartTotal').innerText='$'+total.toLocaleString();
      const b=document.getElementById('cartCountDesk'); if(b) { b.style.display=count?'block':'none'; b.textContent=count; }
    }

    function toggleFav(id){ FAV[id]=!FAV[id]; renderFav(); renderProducts(); }
    function renderFav(){
      let html='',count=0;
      for(let k in FAV){ if(FAV[k]){ count++; const p=PRODUCTS.find(x=>x.id===k); html+=`<div class="panel-item"><img src="${p.img}" style="width:64px;height:64px;object-fit:cover;border-radius:8px;"><div style="flex:1"><strong>${p.title}</strong></div></div>`; } }
      document.getElementById('favList').innerHTML=html||'<p>Sin favoritos.</p>';
      const b=document.getElementById('favCountDesk'); if(b){ b.style.display=count?'block':'none'; b.textContent=count; }
    }

    function openDetail(id){
      const p=PRODUCTS.find(x=>x.id===id);
      // si tienes panel detalle, √∫salo. Aqu√≠ solo abrimos carrito para simplicidad
      togglePanel('cartPanel');
    }

    document.querySelectorAll('.cat-btn').forEach(b=>{
      b.addEventListener('click',()=>{ document.querySelectorAll('.cat-btn').forEach(x=>x.classList.remove('active')); b.classList.add('active'); renderProducts(b.dataset.cat); });
    });

    // Botones header escritorio
    document.getElementById('cartToggleDesk').onclick=()=>{ togglePanel('cartPanel'); renderCart(); }
    document.getElementById('favToggleDesk').onclick=()=>{ togglePanel('favPanel'); renderFav(); }
    document.getElementById('userToggleDesk').onclick=()=>{ togglePanel('userPanel'); }

    document.getElementById('buyBtn').onclick=()=>{
      if(Object.keys(CART).length===0){ alert('Tu carrito est√° vac√≠o üíó'); return; }
      let mensaje='¬°Hola! Quiero comprar estos productos de Pink Key:%0A%0A';
      let total=0;
      for(let k in CART){ const p=PRODUCTS.find(x=>x.id===k); const q=CART[k]; total+=p.price*q; mensaje+=`‚Ä¢ ${p.title} x${q} - $${(p.price*q).toLocaleString()}%0A`; }
      mensaje+=`%0ATotal: $${total.toLocaleString()}%0A%0AEnv√≠ame los detalles, por favor üíó`;
      const url=`https://wa.me/573123820211?text=${mensaje}`;
      window.open(url,'_blank');
    };

    // small utils for mobile menu open/close and initial render
    function openMobileMenu(){ document.getElementById('mobileMenu').classList.add('open'); }
    function closeMobileMenu(){ document.getElementById('mobileMenu').classList.remove('open'); }
    document.addEventListener('DOMContentLoaded', ()=>{
      document.getElementById('burgerBtn').addEventListener('click', openMobileMenu);
      document.getElementById('mobileClose').addEventListener('click', closeMobileMenu);
      renderProducts();
    });

    // close panels on X (delegation)
    document.addEventListener('click', (e) => {
      const closeBtn = e.target.closest('.side-close');
      if (!closeBtn) return;
      const panelId = closeBtn.getAttribute('data-close');
      if (panelId) {
        const panel = document.getElementById(panelId);
        if (panel) panel.classList.remove('open');
      }
    });
    
  function seleccionarCategoria(cat) {
    try {
      // Guarda por compatibilidad (si tu carrito usa sessionStorage)
      sessionStorage.setItem('categoriaPinkKey', cat);
    } catch (e) {
      // ignora si el storage est√° bloqueado
    }
    // Redirige a carrito.html pasando la categor√≠a por query string
    window.location.href = 'carrito.html?cat=' + encodeURIComponent(cat);
  }


  </script>
<script>
/* ---------- Inicializaci√≥n robusta: lee ?cat=... y aplica el filtro ---------- */

(function () {
  // Lee categor√≠a desde query string ?cat=... o desde sessionStorage como fallback
  function getInitialCategory() {
    try {
      const params = new URLSearchParams(window.location.search);
      const q = params.get('cat');
      if (q) return q;
    } catch (e) { /* ignore */ }

    try {
      const s = sessionStorage.getItem('categoriaPinkKey');
      if (s) return s;
    } catch (e) { /* ignore */ }

    return 'all';
  }

  // Marca visualmente el bot√≥n activo (si tiene data-cat)
  function markActiveCategory(cat) {
    document.querySelectorAll('.cat-btn').forEach(btn => {
      const btnCat = btn.dataset ? btn.dataset.cat : null;
      if (btnCat) {
        if (btnCat === cat) btn.classList.add('active');
        else btn.classList.remove('active');
      }
    });
  }

  // Invoca renderProducts con la categor√≠a correcta (si existe)
  function initPage() {
    const initialCat = getInitialCategory() || 'all';

    // Si renderProducts existe, usarla
    if (typeof renderProducts === 'function') {
      // Llamamos con la categor√≠a detectada
      renderProducts(initialCat);
    } else {
      console.warn('renderProducts no est√° definida. Aseg√∫rate de tener la funci√≥n que muestra los productos.');
    }

    // marcar el bot√≥n activo si existe
    markActiveCategory(initialCat);

    // actualizar contadores y otros elementos visibles (si aplica)
    if (typeof renderCart === 'function') renderCart();
    if (typeof renderFav === 'function') renderFav();
  }

  // Aseguramos que se ejecute al cargar
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initPage);
  } else {
    initPage();
  }

  /* Conservar funcionalidad burger / mobile */
  function openMobileMenu(){ const m = document.getElementById('mobileMenu'); if(m) m.classList.add('open'); }
  function closeMobileMenu(){ const m = document.getElementById('mobileMenu'); if(m) m.classList.remove('open'); }
  document.addEventListener('DOMContentLoaded', () => {
    const burger = document.getElementById('burgerBtn');
    const mobileClose = document.getElementById('mobileClose');
    if (burger) burger.addEventListener('click', openMobileMenu);
    if (mobileClose) mobileClose.addEventListener('click', closeMobileMenu);
  });

})();
</script>

  <!-- WhatsApp float -->
  <a href="https://wa.me/573105519202?text=¬°Hola!%20Quisiera%20m√°s%20informaci√≥n%20sobre%20los%20productos%20de%20Pink%20Key%20üíÑ" class="whatsapp-float" target="_blank" title="Escr√≠benos por WhatsApp">
    <i class="fab fa-whatsapp" style="font-size:22px;line-height:60px;"></i>
  </a>

  <!-- Bootstrap JS (sit√∫a al final) -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
